Autonoe: Think back to Episodes 1 through 12. You learned to architect multi-region based on your business needs. Hot-warm for five-minute RTO. Hot-hot for active-active. Cost optimization, DR procedures, the works. [pause short] But what if your business needs don't matter? [pause short] What if regulators dictate your architecture?

Autonoe: Welcome to financial services, where compliance isn't optional, and your RTO isn't a business decision - it's a legal mandate. Today you're learning how SEC regulations, MiFID II, and crypto compliance drive multi-region architecture. Not suggested. Required. With specific numbers, audit requirements, and penalties for non-compliance.

Autonoe: By the end of this lesson, you'll understand SEC Regulation SCI and why stock exchanges must hit 2-4 hour RTO. MiFID II data residency requirements that force EU-only architectures. Crypto regulations from NY BitLicense to EU MiCA. How compliance becomes your primary architecture driver, overriding cost considerations. And audit logging that survives regulator scrutiny.

Autonoe: Because in regulated industries, architecture decisions aren't about trade-offs. [pause long] They're about compliance or shutdown.

Autonoe: Let's start with SEC Regulation SCI, the rule that mandates multi-region for US exchanges. SEC stands for Securities and Exchange Commission. SCI stands for Systems Compliance and Integrity. Regulation SCI, adopted in 2014, applies to SCI entities - stock exchanges, clearinghouses, alternative trading systems above certain thresholds. The regulation requires these entities to have policies and procedures for technology governance. Including disaster recovery and business continuity capabilities.

Autonoe: Here's the critical part. [pause short] SCI entities must establish RTO and RPO for critical systems. Not aspirational targets. Documented, tested, and reported to SEC. Typical RTO for trading systems: Two to four hours. [pause short] Not the five minutes from Episode 2's hot-warm. Not the one hour you might choose for cost optimization. Two to four hours is standard because that's what regulators expect based on industry practice. RPO for trade data: Near-zero. [pause short] Every executed trade must be recoverable.

Autonoe: Losing ten seconds of trades during regional failover? [pause long] That's reportable to SEC and potentially millions in liability.

Autonoe: This immediately dictates your architecture. You need Aurora Global Database for transaction ledgers. Not DynamoDB with eventual consistency. Not MongoDB with best-effort replication. Aurora with synchronous replication and ACID guarantees.

Autonoe: Real example: Major US stock exchange, hot-warm architecture. Primary US-EAST-1, secondary US-WEST-2. Aurora Global Database replicating trade execution data with sub-second RPO. EKS clusters in both regions with thirty percent secondary capacity. Route53 health checks with manual failover approval to meet regulatory control requirements. They don't use automatic failover. Why? [pause] SEC expects human oversight during disaster declaration. Automatic DNS failover might trigger for transient issues, causing unnecessary disruption. So they have runbooks requiring two senior engineers to approve failover, documented decision process, and immediate SEC notification.

Autonoe: SCI also requires quarterly disaster recovery testing. Not optional GameDay exercises from Episode 12. Mandatory quarterly tests with documented results submitted to SEC. This means your DR procedures must work reliably, not just theoretically.

Autonoe: Cost implication: This exchange spends three million annually on multi-region infrastructure. [pause short] Their alternative? [pause long] Potential SEC enforcement action, trading halts, loss of market maker confidence. Multi-region isn't a cost-benefit calculation. It's cost-of-doing-business.

Autonoe: Now MiFID II, the European regulation that changes data architecture fundamentally. MiFID II stands for Markets in Financial Instruments Directive II. Implemented 2018 across EU. Requires investment firms, trading venues, and data providers to maintain detailed transaction reporting.

Autonoe: The critical compliance requirement: [pause long] Data residency. Trade data from EU customers must remain in EU. Cannot be transferred to US or other non-EU regions without adequacy decision or appropriate safeguards under GDPR.

Autonoe: This creates architectural constraints Episode 5's global network didn't address. You cannot simply replicate EU data to US-EAST-1 as disaster recovery. [pause long] That violates MiFID II data residency. Your options: EU-only multi-region. Primary EU-WEST-1, secondary EU-CENTRAL-1. Aurora Global Database stays within EU. DynamoDB Global Tables if used must have replication restricted to EU regions.

Autonoe: Implementation using S3 Bucket Policies and AWS Organizations. Create Service Control Policy preventing data replication outside EU regions. S3 bucket policy denying PutObject from non-EU regions. This provides technical enforcement of data residency.

Autonoe: Example policy for S3: Deny any PutObject or CopyObject where aws:RequestedRegion is not eu-west-1, eu-central-1, or eu-north-1. This prevents accidental data transfer to US regions even with proper IAM permissions.

Autonoe: For Aurora Global Database: Only add EU regions as secondaries. Do not add US-EAST-1 even though it might be operationally convenient. Compliance trumps operational preference.

Autonoe: Real scenario: EU investment bank implementing MiFID II compliance. Initially had global multi-region with US secondary. MiFID II forced architecture change. Removed US secondary, added EU-CENTRAL-1. Cost increased because EU instance pricing is fifteen percent higher than US. [pause short] Alternative? [pause long] Regulatory fine up to ten million euros or four percent of annual turnover, whichever is higher. [pause short] They paid the extra cost.

Autonoe: MiFID II also requires seven years of transaction reporting retention. [pause short] Not in warm storage. Queryable within reasonable timeframe for regulator audits. This means S3 Intelligent Tiering from Episode 9, but with retrieval SLAs. When regulators request data, you have days not weeks to produce it. Trade reporting itself must happen within one business day. T plus one. Trade executes Monday, must be reported to regulators by end-of-day Tuesday. This requires reliable cross-region replication for EU firms with multiple trading venues. DynamoDB Global Tables replicating trade data across EU regions, aggregated for reporting.

Autonoe: Now crypto regulations, where the landscape is still evolving. [pause short] NY BitLicense, issued by New York State Department of Financial Services. Applies to entities conducting virtual currency business activity in New York. Requires cybersecurity program including disaster recovery and business continuity plan. Specific RTO/RPO not mandated by BitLicense. But NYDFS expects industry-standard practices. For custodial services holding customer crypto assets, that means hot-warm minimum with 4-hour RTO. For high-value custody, some firms implement hot-hot to minimize risk window.

Autonoe: BitLicense also requires transaction monitoring for fraud detection and anti-money-laundering. This means immutable audit trails for every deposit, withdrawal, and transfer. CloudTrail for AWS API calls. Application-level logging for every wallet operation. S3 with Object Lock preventing deletion for seven years minimum.

Autonoe: Real example: Crypto exchange with BitLicense. Hot-warm architecture, primary US-EAST-1, secondary US-WEST-2. Aurora Global Database for customer accounts and wallet balances. DynamoDB for high-frequency trading data. Full audit logging to S3 with Object Lock. Annual compliance cost: one-point-two million dollars for infrastructure, eight hundred thousand for compliance staff and audits. [pause short]

Autonoe: EU MiCA, Markets in Crypto-Assets Regulation. Effective progressively from 2024-2025. Requires crypto-asset service providers to have operational resilience. Must identify and manage ICT risks including disaster recovery. MiCA doesn't specify exact RTO but requires documented continuity plans proportionate to risk. For stablecoin issuers, this likely means hot-hot given systemic importance. For smaller trading platforms, hot-warm with documented 4-hour RTO may suffice.

Autonoe: MiCA also subjects crypto firms to GDPR data residency requirements. EU customer data stays in EU. Same architectural constraints as MiFID II - EU-only multi-region unless using appropriate safeguards.

Autonoe: The key difference between traditional finance and crypto compliance: [pause long] Immutability requirements are stricter. Blockchain transactions are immutable by design. Regulators expect equivalent immutability for off-chain records. This means S3 Object Lock in compliance mode, not governance mode. Once written, cannot be deleted even by root account. Retained for duration specified by regulation.

Autonoe: Now how compliance drives architecture decisions, overriding cost and complexity. Episode 1's CCC Triangle: Cost, Complexity, Capability. In regulated industries, Compliance becomes the fourth C. [pause short] And it trumps the other three.

Autonoe: Example decision: Should we use Aurora or DynamoDB for transaction ledger? Normal analysis: DynamoDB is cheaper, scales better, suits our access patterns. [pause short] Compliance analysis: Auditors require ACID transactions and point-in-time recovery. Aurora only. Cost and access patterns are secondary.

Autonoe: Example decision: Should we run secondary at twenty-five percent capacity from Episode 9's optimization? Normal analysis: Yes, saves twenty percent on compute. [pause short] Compliance analysis: Can we scale to full capacity within mandated RTO? If RTO is 2 hours and auto-scaling takes 30 minutes, yes. If RTO is 4 hours, definitely yes. But document the scaling time in DR plan for auditors.

Autonoe: Example decision: Should we use Route53 automatic failover from Episode 8? Normal analysis: Subsecond detection, faster RTO. [pause short] Compliance analysis: Do regulators require human approval for disaster declaration? If yes, manual failover with documented approval process. If no, automatic failover acceptable but must log all failover events for audit.

Autonoe: This is the compliance-driven decision framework: [pause]
Autonoe: 1. Start with regulatory requirements.
Autonoe: 2. Map to technical controls.
Autonoe: 3. Implement technical architecture.
Autonoe: 4. Document everything for auditors.
Autonoe: 5. Test quarterly.
Autonoe: 6. Update documentation after every change.

Autonoe: Audit logging in practice, meeting regulator expectations. [pause short] Regulators want to see: Who did what, when, from where, with what result. For every action affecting customer data or financial transactions.

Autonoe: AWS CloudTrail provides API-level logging. Every EC2 launch, S3 upload, Aurora query - logged with IAM user, timestamp, source IP, API call, response. This is your infrastructure audit trail. But CloudTrail doesn't log application-level actions. User login, fund transfer, wallet withdrawal - your application must log these. Use structured logging with JSON. Include user ID, action type, timestamp, source IP, before-state, after-state, result.

Autonoe: Example log line for fund transfer:
Autonoe: ```
Autonoe: {
Autonoe:   "timestamp": "2025-01-15T14:32:18Z",
Autonoe:   "user_id": "user123456",
Autonoe:   "action": "transfer_funds",
Autonoe:   "source_account": "acct_abc",
Autonoe:   "destination_account": "acct_xyz",
Autonoe:   "amount": 50000,
Autonoe:   "currency": "USD",
Autonoe:   "status": "success",
Autonoe:   "source_ip": "203.0.113.42",
Autonoe:   "session_id": "sess_789",
Autonoe:   "approval_chain": ["user123456", "manager_222"]
Autonoe: }
Autonoe: ```
Autonoe: This log entry shows who transferred funds, how much, to whom, when, from where, and who approved it. Auditor can reconstruct the complete transaction.

Autonoe: Ship logs to S3. Enable S3 Object Lock in compliance mode. Set retention period based on regulation - seven years for financial services. Configure S3 bucket policy preventing deletion even by root account. This proves to auditors that logs are immutable.

Autonoe: CloudWatch Logs for real-time monitoring. But also export to S3 for long-term retention. CloudWatch retention is expensive beyond 90 days. S3 with Intelligent Tiering costs two cents per gigabyte per month. [pause short] For one terabyte of annual logs, that's twenty dollars per month, one hundred forty per year for seven years retention. [pause short]

Autonoe: Cross-region log replication for compliance. Primary region fails, [pause long] you lose in-flight logs. Replicate CloudWatch Logs to secondary region. Use Kinesis Firehose streaming to S3 in both regions. Accept the data transfer cost - Episode 9's optimization doesn't apply when regulators require it.

Autonoe: Real compliance audit scenario. [pause short] Regulator requests all fund transfers above ten thousand dollars for specific user over six-month period. With structured logging and S3 Athena queries, you provide complete results in under one hour. Without proper logging, [pause long] you're manually searching database backups, taking days, and demonstrating non-compliance.

Autonoe: Common compliance mistakes that cause regulatory findings. [pause]
Autonoe: Mistake one: Treating compliance as IT problem. Compliance is business problem requiring legal, risk, and engineering collaboration. Engineers build technical controls, but compliance team defines requirements. Fix: Compliance and engineering meet monthly to review controls and gaps.
Autonoe: Mistake two: Testing DR but not documenting tests. You run quarterly DR exercises but don't save test results and findings. Auditor asks for proof, you have none. Fix: Document every DR test. What worked, what failed, remediation actions, retesting results. Store in compliance management system.
Autonoe: Mistake three: Automatic log deletion after 90 days. You set CloudWatch retention to 90 days to save costs. Regulation requires seven years. Auditor discovers gap, issues finding. Fix: Export to S3 with seven-year retention before CloudWatch deletion.
Autonoe: Mistake four: No change control for production. Engineers deploy directly to production multi-region. No approval workflow, no documentation. Auditor considers this high-risk. Fix: Implement change approval process. Document who approved, what changed, when deployed, rollback plan.
Autonoe: Mistake five: Missing data residency controls. You architect EU multi-region but don't implement technical controls preventing data transfer to US. Manual process only. Auditor considers this insufficient. Fix: Service Control Policies and S3 bucket policies enforcing data residency technically.

Autonoe: Before we wrap up, pause and answer these questions.
Autonoe: Question one: Why does SEC Regulation SCI require human approval for disaster declaration instead of automatic DNS failover? [pause]
Autonoe: Question two: Your EU investment firm needs disaster recovery for MiFID II compliance. Can you use US-WEST-2 as secondary region? [pause]
Autonoe: Question three: You're logging all fund transfers to CloudWatch with 90-day retention. Is this sufficient for BitLicense compliance? [pause]

Autonoe: Take a moment. [pause short]

Autonoe: Answers. [pause long]
Autonoe: Question one: SEC expects documented human judgment during disaster scenarios. Automatic failover might trigger for transient issues causing unnecessary disruption.

Autonoe: Human approval ensures the disaster is real, that failover is necessary, and that the decision process is documented for post-incident review. [pause short] This provides regulatory accountability.

Autonoe: Question two: No. [pause short] MiFID II requires EU data residency. Trade data from EU customers cannot be transferred to US regions without a GDPR adequacy decision or appropriate safeguards. Use EU-CENTRAL-1 or EU-NORTH-1 as your secondary. This increases cost due to higher EU instance pricing, but compliance is mandatory. [pause short]

Autonoe: Question three: No. [pause short] BitLicense requires seven years retention for transaction records. [pause long] CloudWatch 90-day retention is insufficient. You must export logs to S3 with Object Lock and a seven-year retention period. This proves immutability and meets regulatory requirements. [pause long] Failure to retain logs is a compliance violation.

Autonoe: Let's recap what we covered. [pause short]

Autonoe: [pause]
Autonoe: First: SEC Regulation SCI mandates a 2-4 hour RTO and a near-zero RPO for US exchanges. [pause short] This requires Aurora Global Database with multi-region replication. Quarterly DR testing is mandatory, with results reported to the SEC. Human approval for failover provides regulatory accountability.

Autonoe: [pause]
Autonoe: Second: MiFID II requires EU data residency for customer trade data. You cannot replicate to US regions without appropriate safeguards. Implement Service Control Policies and S3 bucket policies enforcing data residency. Seven years transaction reporting retention with queryable access.

Autonoe: [pause]
Autonoe: Third: Crypto regulations - like NY BitLicense and EU MiCA - require operational resilience and immutable audit trails. S3 Object Lock in compliance mode prevents deletion. Crypto firms face stricter immutability requirements, matching blockchain properties.

Autonoe: [pause]
Autonoe: Fourth: Compliance drives architecture decisions, overriding cost and complexity. The decision framework starts with regulatory requirements, maps them to technical controls, implements the architecture, and documents it for auditors. Test quarterly and update documentation.

Autonoe: [pause]
Autonoe: Fifth: Audit logging must capture the who, what, when, where, and result for every single action. CloudTrail for infrastructure, application logging for business actions. Ship to S3 with Object Lock and seven-year retention. Cross-region replication prevents log loss during failures.

Autonoe: [pause]
Autonoe: Sixth: The common mistakes. [pause short] Treating compliance as an IT problem, not documenting tests, automatic log deletion, no change control, missing technical data residency controls. All of these are preventable with a proper compliance program.

Autonoe: Remember Episodes 2 and 9? [pause] We discussed how business needs drive RTO/RPO and cost trade-offs. In regulated industries, compliance requirements replace business needs. Your RTO is mandated. Your data residency is mandated. Your audit logging is mandated. The architecture follows from compliance, and the cost is simply the cost-of-doing-business. [pause short]

Autonoe: We'll see security architecture in Episode 14 - encryption at rest and in transit, KMS key management across regions, and how to implement zero-trust networking. Security and compliance work together - compliance defines the requirements, and security implements the controls.

Autonoe: Next time: Security Architecture - encryption, KMS, and zero-trust. Everything we've built assumes you can protect it.

Autonoe: [pause long]
Autonoe: Multi-region data replication is useless if attackers can access it during transit. An Aurora failover doesn't matter if your KMS keys are misconfigured and the secondary region can't decrypt the data.

Autonoe: You'll learn encryption at rest with KMS across regions. How to replicate encrypted Aurora databases without key exposure. Encryption in transit with TLS and VPC endpoints. Cross-region KMS key policies that actually work during a failover. And zero-trust networking principles for multi-region architectures.

Autonoe: Because regulated data without proper encryption is a compliance violation waiting to happen. [pause long]

Autonoe: See you in Episode 14.